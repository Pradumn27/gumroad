<!DOCTYPE html>
<html lang="en">

<head>
    <title><%= content_for?(:title) ? yield(:title) : "Gumroad Dashboard" %></title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <!-- Include your existing design pack for styling -->
    <%= stylesheet_pack_tag "design", crossorigin: "anonymous" %>

    <!-- Inertia SSR head -->
    <%= inertia_ssr_head %>
    <!-- Load only the Inertia pack, not your existing application.js -->
    <%= javascript_pack_tag "inertia", defer: true %>
</head>
<% bclass = ["group/body"] %>
<% bclass.push "mac" if request.headers["User-Agent"]&.include? "Macintosh" %>
<% bclass.push(@body_class) if @body_class %>
<% show_nav = !@hide_layouts && user_signed_in? %>
<% bclass.push("sidebar-nav") if show_nav %>
<% custom_context = RenderingExtension.custom_context(self) %>

<body id="<%= @body_id %>" class="<%= bclass.join(" ") %>" style="<%= params[:as_embed] && "background: transparent" %>">
    <div id="design-settings" data-settings="<%= custom_context[:design_settings].to_json %>" style="display: none;"></div>
    <div id="user-agent-info" data-settings="<%= custom_context[:user_agent_info].to_json %>" style="display: none;"></div>
    <%= render("layouts/shared/flash") %>
    <%= content_for?(:content) ? yield(:content) : yield %>
    <% if content_for? :footer %>
    <footer>
        <%= yield :footer %>
    </footer>
    <% end %>
    <%= javascript_include_tag "application" %>
    <%= yield :script %>
    <%= render("layouts/shared/helper_widget") %>
    <%= yield %>
</body>

</html>
